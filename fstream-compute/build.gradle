/*
 * Copyright (c) 2014 fStream. All Rights Reserved.
 *
 * Project and contact information: https://bitbucket.org/fstream/fstream
 *
 * Unauthorized copying of this file, via any medium is strictly prohibited.
 * Proprietary and confidential.
 */

import com.github.jengelman.gradle.plugins.shadow.transformers.AppendingTransformer

apply plugin: 'application'
apply plugin: 'com.github.johnrengelman.shadow'

mainClassName = "io.fstream.compute.ComputeMain"

shadowJar {
  exclude 'META-INF/*.SF'
  exclude 'META-INF/*.DSA'
  exclude 'META-INF/*.RSA'
  classifier = ''

  mergeServiceFiles()
  transform(AppendingTransformer) {
    resource = 'META-INF/spring.handlers' 
  }
  transform(AppendingTransformer) {
    resource = 'META-INF/spring.schemas' 
  }
  transform(AppendingTransformer) {
    resource = 'META-INF/spring.tooling' 
  }
  transform(AppendingTransformer) {
    resource = 'META-INF/spring.factories' 
  }
}

build.dependsOn shadowJar

dependencies {
  // fStream
  compile project(':fstream-core')

  // Spring
  compile libraries.springBootActuator

  // Storm
  compile libraries.storm

  // Storm-Kafka
  compile libraries.stormKafka

  // Kafka
  compile libraries.kafka

  // Esper
  compile libraries.esper

  // Utilities
  compile libraries.guava
}
